#!/bin/bash

# Instalación de V2Ray
bash <(curl -L -s https://install.direct/go.sh)

# Configuración de V2Ray
echo "Configuración de V2Ray"
echo "Seleccione el protocolo (vmess, vless, etc.): "
read protocol
echo "Seleccione el puerto: "
read port
echo "¿Habilitar TLS? (S/n): "
read enable_tls

# Configurar V2Ray con los parámetros especificados
cat > /etc/v2ray/config.json <<EOF
{
  "inbounds": [
    {
      "port": $port,
      "protocol": "$protocol",
      "settings": {
        "clients": [
          {
            "id": "your_user_id",
            "alterId": 64
          }
        ]
      }
    }
  ],
  "outbounds": [
    {
      "protocol": "freedom",
      "settings": {}
    }
  ]
}
EOF

if [ "$enable_tls" = "S" ] || [ "$enable_tls" = "s" ]; then
  echo "Habilitando TLS"
  sed -i 's#"tls": false#"tls": true#' /etc/v2ray/config.json
fi

# Reiniciar V2Ray
systemctl restart v2ray

# Lógica para gestionar usuarios
# Agrega tu lógica aquí para crear, eliminar o gestionar usuarios V2Ray según tus necesidades

echo "V2Ray instalado y configurado."
